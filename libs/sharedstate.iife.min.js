var SHAREDSTATE=function(t){"use strict";function e(){let t;return[new Promise(((e,s)=>{t=e})),t]}const s=4;class n{constructor(t,e={}){this._url=t,this._ws,this._connecting=!1,this._connected=!1,this._options=e,this._retries=0,this._connect_promise_resolvers=[]}get connecting(){return this._connecting}get connected(){return this._connected}get url(){return this._url}get options(){return this._options}connect(){this.connecting||this.connected?console.log("Connect while connecting or connected"):this._is_terminated()?console.log("Terminated"):(this._ws=new WebSocket(this._url),this._connecting=!0,this._ws.onopen=t=>this._on_open(t),this._ws.onmessage=t=>this.on_message(t.data),this._ws.onclose=t=>this._on_close(t),this._ws.onerror=t=>this.on_error(t),this.on_connecting())}_on_open(t){this._connecting=!1,this._connected=!0;for(const t of this._connect_promise_resolvers)t();this._connect_promise_resolvers=[],this._retries=0,this.on_connect()}_on_close(t){this._connecting=!1,this._connected=!1,this.on_disconnect(t),this._retries+=1,this._is_terminated()||setTimeout((()=>{this.connect()}),1e3*this._retries)}_is_terminated(){const{retries:t=s}=this._options;return this._retries>=t&&(console.log(`Terminated: Max retries reached (${t})`),this._connecting=!1,this._connected=!0,this._ws.onopen=void 0,this._ws.onmessage=void 0,this._ws.onclose=void 0,this._ws.onerror=void 0,this._ws=void 0,!0)}on_connecting(){const{debug:t=!1}=this._options;t&&console.log(`Connecting ${this.url}`)}on_connect(){console.log(`Connect  ${this.url}`)}on_error(t){const{debug:e=!1}=this._options;e&&console.log(`Error: ${t}`)}on_disconnect(t){console.error(`Disconnect ${this.url}`)}on_message(t){const{debug:e=!1}=this._options;e&&console.log(`Receive: ${t}`)}send(t){if(this._connected)try{this._ws.send(t)}catch(t){console.error(`Send fail: ${t}`)}else console.log("Send drop : not connected")}connectedPromise(){const[t,s]=e();return this.connected?s():this._connect_promise_resolvers.push(s),t}}class i{constructor(t,e,s={}){this._options=s,this._terminated=!1,this._ssclient=t,this._path=e,this._handlers=[],this._map=new Map}_ssclient_terminate(){this._terminated=!0,this._handlers=[]}_ssclient_update(t={}){if(this._terminated)throw new Error("collection already terminated");const{remove:e,insert:s,reset:n=!1}=t,i=new Map;if(n){for(const t of this._map.values())i.set(t.id,{id:t.id,new:void 0,old:t});this._map=new Map}else for(const t of e){const e=this._map.get(t);null!=e&&(this._map.delete(t),i.set(t,{id:t,new:void 0,old:e}))}for(const t of s){const e=t.id,s=i.get(e),n=null!=s?s.old:this._map.get(e);this._map.set(e,t),i.set(e,{id:e,new:t,old:n})}this._notify_callbacks([...i.values()])}_notify_callbacks(t){this._handlers.forEach((function(e){e.handler(t)}))}get size(){return this._map.size}has(t){return this._map.has(t)}get(t){return null==t?[...this._map.values()]:this._map.get(t)}update(t={}){if(this._terminated)throw new Error("collection already terminated");const{insert:e=[]}=t;return t.insert=e.map((t=>(t.id=t.id||function(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<t;n++)e+=s.charAt(Math.floor(52*Math.random()));return e}(10),t))),this._ssclient.update(this._path,t)}add_callback(t){const e={handler:t};return this._handlers.push(e),e}remove_callback(t){const e=this._handlers.indexOf(t);e>-1&&this._handlers.splice(e,1)}}class o{constructor(t,e,s={}){this._terminiated=!1,this._coll=t,this._id=e,this._options=s,this._handlers=[],this._handle=this._coll.add_callback(this._onchange.bind(this))}_onchange(t){if(this._terminated)throw new Error("variable terminated");for(const e of t)e.id==this._id&&(this._item=e.new,this.notify_callbacks(e))}add_callback(t){const e={handler:t};return this._handlers.push(e),e}remove_callback(t){let e=this._handlers.indexOf(t);e>-1&&this._handers.splice(e,1)}notify_callbacks(t){this._handlers.forEach((function(e){e.handler(t)}))}set(t){if(this._terminated)throw new Error("varible terminated");const e=[{id:this._id,data:t}];return this._coll.update({insert:e,reset:!1})}get(){return this._coll.has(this._id)?this._coll.get(this._id).data:this._options.value}ss_client_terminate(){this._terminated=!0,this._coll.remove_callback(this._handle)}}const r=function(){return performance.now()/1e3},c=function(){return new Date/1e3},_=function(){const t=r(),e=c();return{now:function(){const s=r();return e+(s-t)}}}();class h{constructor(t){this._ssclient=t,this._pinger=new l(this._onping.bind(this)),this._samples=[],this._trans=1e3,this._skew=0}resume(){this._pinger.resume()}pause(){this._pinger.pause()}_onping(){const t=_.now();this._ssclient.get("/clock").then((({ok:e,data:s})=>{if(e){const e=_.now();this._add_sample(t,s,e)}}))}_add_sample(t,e,s){let n=(s-t)/2,i=e-(s+t)/2,o=[t,e,s,n,i];this._samples.push(o),this._samples.length>30&&this._samples.shift(),n=1e5,i=0;for(const t of this._samples)t[3]<n&&(n=t[3],i=t[4]);this._skew=i,this._trans=n}get skew(){return this._skew}get trans(){return this._trans}now(){return _.now()+this._skew}}const a=[...new Array(3).fill(20),...new Array(7).fill(500),1e4];class l{constructor(t){this._count=0,this._tid=void 0,this._callback=t,this._ping=this.ping.bind(this),this._delays=[...a]}pause(){clearTimeout(this._tid)}resume(){clearTimeout(this._tid),this.ping()}restart(){this._delays=[...a],clearTimeout(this._tid),this.ping()}ping(){let t=this._delays[0];this._delays.length>1&&this._delays.shift(),this._callback&&this._callback(),this._tid=setTimeout(this._ping,t)}}const d=Object.freeze({MESSAGE:"MESSAGE",REQUEST:"REQUEST",REPLY:"REPLY"}),u=Object.freeze({GET:"GET",PUT:"PUT",NOTIFY:"NOTIFY"});function p(t){const{id:e,itv:s,data:n}=t;let i=JSON.stringify(n);return`\n        <div>\n            <button id="delete">X</button>\n            ${`<span class="id">${e}</span>`}: ${`<span class="itv">${null!=s?JSON.stringify(s):""}</span>`} ${`<span class="data">${i}</span>`}\n        </div>`}return t.CollectionViewer=class{constructor(t,e,s={}){this._coll=t,this._elem=e,this._handle=this._coll.add_callback(this._onchange.bind(this));let n={delete:!1,toString:p};this._options={...n,...s},this._options.delete&&e.addEventListener("click",(t=>{const e=t.target.closest("#delete");if(e){const s=e.closest(".list-item");s&&(this._coll.update({remove:[s.id]}),t.stopPropagation())}}));const i=this._coll.get().map((t=>({id:t.id,new:t})));this._onchange(i)}_onchange(t){const{toString:e}=this._options;for(let s of t)if(s.new){let t=this._elem.querySelector(`#${s.id}`);null==t&&(t=document.createElement("div"),t.setAttribute("id",s.id),t.classList.add("list-item"),this._elem.appendChild(t)),t.innerHTML=e(s.new)}else if(s.old){let t=this._elem.querySelector(`#${s.id}`);t&&t.parentNode.removeChild(t)}}},t.SharedStateClient=class extends n{constructor(t,e){super(t,e),this._reqid=0,this._pending=new Map,this._subs_map=new Map,this._coll_map=new Map,this._var_map=new Map,this._server_clock}on_connect(){if(console.log(`Connect  ${this.url}`),this._subs_map.size>0){const t=[...this._subs_map.entries()];this.update("/subs",{insert:t,reset:!0})}null!=this._server_clock&&this._server_clock.resume()}on_disconnect(){console.error(`Disconnect ${this.url}`),null!=this._server_clock&&this._server_clock.pause()}on_error(t){const{debug:e=!1}=this._options;e&&console.log(`Communication Error: ${t}`)}on_message(t){let e=JSON.parse(t);if(e.type==d.REPLY){let t=e.tunnel;if(this._pending.has(t)){let s=this._pending.get(t);this._pending.delete(t);const{ok:n,data:i}=e;s({ok:n,data:i})}}else e.type==d.MESSAGE&&e.cmd==u.NOTIFY&&this._handle_notify(e)}_handle_notify(t){const e=this._coll_map.get(t.path);null!=e&&e._ssclient_update(t.data)}_request(t,s,n){const i=this._reqid++,o={type:d.REQUEST,cmd:t,path:s,arg:n,tunnel:i};this.send(JSON.stringify(o));let[r,c]=e();return this._pending.set(i,c),r.then((({ok:e,data:n})=>(t==u.PUT&&"/subs"==s&&e&&(this._subs_map=new Map(n)),{ok:e,path:s,data:n})))}_sub(t){if(this.connected){new Map([...this._subs_map]).set(t,{});const e=[...this._subs_map.entries()];return this.update("/subs",{insert:e,reset:!0})}return this._subs_map.set(t,{}),Promise.resolve({ok:!0,path:t,data:void 0})}_unsub(t){const e=new Map([...this._subs_map]);e.delete(t);const s=[...e.entries()];return this.update("/subs",{insert:s,reset:!0})}get clock(){return null==this._server_clock&&(this._server_clock=new h(this),this.connected&&this._server_clock.resume()),this._server_clock}get(t){return this._request(u.GET,t)}update(t,e){return this._request(u.PUT,t,e)}acquire_collection(t,e){return this._subs_map.has(t)||this._sub(t),this._coll_map.has(t)||this._coll_map.set(t,new i(this,t,e)),this._coll_map.get(t)}acquire_variable(t,e,s){const n=this.acquire_collection(t);this._var_map.has(t)||this._var_map.set(t,new Map);const i=this._var_map.get(t);return i.get(e)||i.set(e,new o(n,e,s)),i.get(e)}release(t){this._subs_map.has(t)&&this._unsub(t);this._coll_map.get(t)._ssclient_terminate();const e=this._var_map.get(t);if(null!=e)for(const t of e.values())t._ssclient_terminate();this._coll_map.delete(t),this._var_map.delete(t)}},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkc3RhdGUuaWlmZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGllbnQvdXRpbC5qcyIsIi4uLy4uL3NyYy9jbGllbnQvd3Npby5qcyIsIi4uLy4uL3NyYy9jbGllbnQvY29sbGVjdGlvbi5qcyIsIi4uLy4uL3NyYy9jbGllbnQvdmFyaWFibGUuanMiLCIuLi8uLi9zcmMvY2xpZW50L3NlcnZlcmNsb2NrLmpzIiwiLi4vLi4vc3JjL2NsaWVudC9zc19jbGllbnQuanMiLCIuLi8uLi9zcmMvY2xpZW50L3ZpZXdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICAgIENyZWF0ZSBhIHByb21pc2Ugd2hpY2ggY2FuIGJlIHJlc29sdmVkXG4gICAgcHJvZ3JhbW1hdGljYWxseSBieSBleHRlcm5hbCBjb2RlLlxuICAgIFJldHVybiBhIHByb21pc2UgYW5kIGEgcmVzb2x2ZSBmdW5jdGlvblxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmFibGVQcm9taXNlKCkge1xuICAgIGxldCByZXNvbHZlcjtcbiAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgIH0pO1xuICAgIHJldHVybiBbcHJvbWlzZSwgcmVzb2x2ZXJdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZW91dFByb21pc2UgKG1zKSB7XG4gICAgbGV0IHJlc29sdmVyO1xuICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgdGlkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9LCBtcyk7XG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gW3Byb21pc2UsIHJlc29sdmVyXTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tX3N0cmluZyhsZW5ndGgpIHtcbiAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgdmFyIHBvc3NpYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbn0iLCJpbXBvcnQgeyByZXNvbHZhYmxlUHJvbWlzZSB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuY29uc3QgTUFYX1JFVFJJRVMgPSA0O1xuXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0SU8ge1xuXG4gICAgY29uc3RydWN0b3IodXJsLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIHRoaXMuX3VybCA9IHVybDtcbiAgICAgICAgdGhpcy5fd3M7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9yZXRyaWVzID0gMDtcbiAgICAgICAgdGhpcy5fY29ubmVjdF9wcm9taXNlX3Jlc29sdmVycyA9IFtdO1xuICAgIH1cblxuICAgIGdldCBjb25uZWN0aW5nKCkge3JldHVybiB0aGlzLl9jb25uZWN0aW5nO31cbiAgICBnZXQgY29ubmVjdGVkKCkge3JldHVybiB0aGlzLl9jb25uZWN0ZWQ7fVxuICAgIGdldCB1cmwoKSB7cmV0dXJuIHRoaXMuX3VybDt9XG4gICAgZ2V0IG9wdGlvbnMoKSB7cmV0dXJuIHRoaXMuX29wdGlvbnM7fVxuXG4gICAgY29ubmVjdCgpIHtcblxuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW5nIHx8IHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3Qgd2hpbGUgY29ubmVjdGluZyBvciBjb25uZWN0ZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lzX3Rlcm1pbmF0ZWQoKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZXJtaW5hdGVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29ubmVjdGluZ1xuICAgICAgICB0aGlzLl93cyA9IG5ldyBXZWJTb2NrZXQodGhpcy5fdXJsKTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3dzLm9ub3BlbiA9IGUgPT4gdGhpcy5fb25fb3BlbihlKTtcbiAgICAgICAgdGhpcy5fd3Mub25tZXNzYWdlID0gZSA9PiB0aGlzLm9uX21lc3NhZ2UoZS5kYXRhKTtcbiAgICAgICAgdGhpcy5fd3Mub25jbG9zZSA9IGUgPT4gdGhpcy5fb25fY2xvc2UoZSk7XG4gICAgICAgIHRoaXMuX3dzLm9uZXJyb3IgPSBlID0+IHRoaXMub25fZXJyb3IoZSk7XG4gICAgICAgIHRoaXMub25fY29ubmVjdGluZygpO1xuICAgIH1cblxuICAgIF9vbl9vcGVuKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gcmVsZWFzZSBjb25uZWN0IHByb21pc2VzXG4gICAgICAgIGZvciAoY29uc3QgcmVzb2x2ZXIgb2YgdGhpcy5fY29ubmVjdF9wcm9taXNlX3Jlc29sdmVycykge1xuICAgICAgICAgICAgcmVzb2x2ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb25uZWN0X3Byb21pc2VfcmVzb2x2ZXJzID0gW107XG4gICAgICAgIC8vIHJlc2V0IHJldHJpZXMgb24gc3VjY2Vzc2Z1bCBjb25uZWN0aW9uXG4gICAgICAgIHRoaXMuX3JldHJpZXMgPSAwO1xuICAgICAgICB0aGlzLm9uX2Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBfb25fY2xvc2UoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbl9kaXNjb25uZWN0KGV2ZW50KTtcbiAgICAgICAgdGhpcy5fcmV0cmllcyArPSAxO1xuICAgICAgICBpZiAoIXRoaXMuX2lzX3Rlcm1pbmF0ZWQoKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgICAgICB9LCAxMDAwICogdGhpcy5fcmV0cmllcyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2lzX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGNvbnN0IHtyZXRyaWVzPU1BWF9SRVRSSUVTfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLl9yZXRyaWVzID49IHJldHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUZXJtaW5hdGVkOiBNYXggcmV0cmllcyByZWFjaGVkICgke3JldHJpZXN9KWApO1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3dzLm9ub3BlbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3dzLm9ubWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3dzLm9uY2xvc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl93cy5vbmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5fd3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb25fY29ubmVjdGluZygpIHtcbiAgICAgICAgY29uc3Qge2RlYnVnPWZhbHNlfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGlmIChkZWJ1Zykge2NvbnNvbGUubG9nKGBDb25uZWN0aW5nICR7dGhpcy51cmx9YCk7fVxuICAgIH1cbiAgICBvbl9jb25uZWN0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgQ29ubmVjdCAgJHt0aGlzLnVybH1gKTtcbiAgICB9XG4gICAgb25fZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3Qge2RlYnVnPWZhbHNlfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGlmIChkZWJ1Zykge2NvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTt9XG4gICAgfVxuICAgIG9uX2Rpc2Nvbm5lY3QoZXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRGlzY29ubmVjdCAke3RoaXMudXJsfWApO1xuICAgIH1cbiAgICBvbl9tZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgY29uc3Qge2RlYnVnPWZhbHNlfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGlmIChkZWJ1Zykge2NvbnNvbGUubG9nKGBSZWNlaXZlOiAke2RhdGF9YCk7fVxuICAgIH1cblxuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFNlbmQgZmFpbDogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTZW5kIGRyb3AgOiBub3QgY29ubmVjdGVkYClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbm5lY3RlZFByb21pc2UoKSB7XG4gICAgICAgIGNvbnN0IFtwcm9taXNlLCByZXNvbHZlcl0gPSByZXNvbHZhYmxlUHJvbWlzZSgpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHJlc29sdmVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0X3Byb21pc2VfcmVzb2x2ZXJzLnB1c2gocmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbn1cblxuXG4iLCJpbXBvcnQgeyByYW5kb21fc3RyaW5nIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvbiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihzc2NsaWVudCwgcGF0aCwgb3B0aW9ucz17fSkge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IGZhbHNlO1xuICAgICAgICAvLyBzaGFyZWRzdGF0ZSBjbGllbnRcbiAgICAgICAgdGhpcy5fc3NjbGllbnQgPSBzc2NsaWVudDtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIC8vIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLl9oYW5kbGVycyA9IFtdO1xuICAgICAgICAvLyBpdGVtc1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICBTSEFSRUQgU1RBVEUgQ0xJRU5UIEFQSVxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0aW9uIHJlbGVhc2VkIGJ5IHNzIGNsaWVudFxuICAgICAqL1xuXG4gICAgX3NzY2xpZW50X3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IHRydWU7XG4gICAgICAgIC8vIGVtcHR5IGNvbGxlY3Rpb24/XG4gICAgICAgIC8vIGRpc2Nvbm5lY3QgZnJvbSBvYnNlcnZlcnNcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXJ2ZXIgdXBkYXRlIGNvbGxlY3Rpb24gXG4gICAgICovXG4gICAgX3NzY2xpZW50X3VwZGF0ZSAoY2hhbmdlcz17fSkge1xuXG4gICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb2xsZWN0aW9uIGFscmVhZHkgdGVybWluYXRlZFwiKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge3JlbW92ZSwgaW5zZXJ0LCByZXNldD1mYWxzZX0gPSBjaGFuZ2VzO1xuICAgICAgICBjb25zdCBkaWZmX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyByZW1vdmUgaXRlbXMgLSBjcmVhdGUgZGlmZlxuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLl9tYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICBkaWZmX21hcC5zZXQoXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uaWQsIFxuICAgICAgICAgICAgICAgICAgICB7aWQ6IGl0ZW0uaWQsIG5ldzp1bmRlZmluZWQsIG9sZDppdGVtfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IF9pZCBvZiByZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGQgPSB0aGlzLl9tYXAuZ2V0KF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9sZCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShfaWQpO1xuICAgICAgICAgICAgICAgICAgICBkaWZmX21hcC5zZXQoX2lkLCB7aWQ6X2lkLCBuZXc6dW5kZWZpbmVkLCBvbGR9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbnNlcnQgaXRlbXMgLSB1cGRhdGUgZGlmZlxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5zZXJ0KSB7XG4gICAgICAgICAgICBjb25zdCBfaWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgLy8gb2xkIGZyb20gZGlmZl9tYXAgb3IgX21hcFxuICAgICAgICAgICAgY29uc3QgZGlmZiA9IGRpZmZfbWFwLmdldChfaWQpO1xuICAgICAgICAgICAgY29uc3Qgb2xkID0gKGRpZmYgIT0gdW5kZWZpbmVkKSA/IGRpZmYub2xkIDogdGhpcy5fbWFwLmdldChfaWQpO1xuICAgICAgICAgICAgLy8gc2V0IHN0YXRlXG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0KF9pZCwgaXRlbSk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgZGlmZiBtYXBcbiAgICAgICAgICAgIGRpZmZfbWFwLnNldChfaWQsIHtpZDpfaWQsIG5ldzppdGVtLCBvbGR9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ub3RpZnlfY2FsbGJhY2tzKFsuLi5kaWZmX21hcC52YWx1ZXMoKV0pO1xuICAgIH1cblxuICAgIF9ub3RpZnlfY2FsbGJhY2tzIChlQXJnKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBoYW5kbGUuaGFuZGxlcihlQXJnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgQVBQTElDQVRJT04gQVBJXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIGdldCBzaXplKCkge3JldHVybiB0aGlzLl9tYXAuc2l6ZX1cbiAgICBoYXMoaWQpIHtyZXR1cm4gdGhpcy5fbWFwLmhhcyhpZCl9XG4gICAgZ2V0KGlkKSB7XG4gICAgICAgIGlmIChpZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4udGhpcy5fbWFwLnZhbHVlcygpXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXQoaWQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBsaWNhdGlvbiBkaXNwYXRjaGluZyB1cGRhdGUgdG8gc2VydmVyXG4gICAgICovXG4gICAgdXBkYXRlIChjaGFuZ2VzPXt9KSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb2xsZWN0aW9uIGFscmVhZHkgdGVybWluYXRlZFwiKVxuICAgICAgICB9XG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IGluc2VydGVkIGl0ZW1zIGhhdmUgaWRzXG4gICAgICAgIGNvbnN0IHtpbnNlcnQ9W119ID0gY2hhbmdlcztcbiAgICAgICAgY2hhbmdlcy5pbnNlcnQgPSBpbnNlcnQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtLmlkID0gaXRlbS5pZCB8fCByYW5kb21fc3RyaW5nKDEwKTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NzY2xpZW50LnVwZGF0ZSh0aGlzLl9wYXRoLCBjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBsaWNhdGlvbiByZWdpc3RlciBjYWxsYmFja1xuICAgICovXG4gICAgYWRkX2NhbGxiYWNrIChoYW5kbGVyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZSA9IHtoYW5kbGVyfTtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMucHVzaChoYW5kbGUpO1xuICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgIH07ICAgIFxuICAgIHJlbW92ZV9jYWxsYmFjayAoaGFuZGxlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5faGFuZGxlcnMuaW5kZXhPZihoYW5kbGUpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07ICAgIFxufSIsIlxuLyoqXG4gKiBWYXJpYWJsZVxuICogXG4gKiBXcmFwcGVyIHRvIGV4cG9zZSBhIHNpbmdsZSBpZCAoaXRlbSkgZnJvbSBhIGNvbGxlY3Rpb24gYXMgYSBzdGFuZGFsb25lIHZhcmlhYmxlXG4gKiBcbiAqIC0gaWYgdGhlcmUgaXMgbm8gaXRlbSB3aXRoIGlkIGluIGNvbGxlY3Rpb24gLSB0aGUgdmFyaWFibGUgd2lsbCBiZSB1bmRlZmluZWRcbiAqICAgb3IgaGF2ZSBhIGRlZmF1bHQgdmFsdWVcbiAqIC0gb3RoZXJ3aXNlLCB0aGUgdmFyaWFibGUgd2lsbCBiZSB0aGUgdmFsdWUgb2YgaXRlbS5kYXRhXG4gKiBcbiAqICBEZWZhdWx0IHZhbHVlIGlzIGdpdmVuIGluIG9wdGlvbnMge3ZhbHVlOn1cbiAqL1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGUge1xuXG4gICAgY29uc3RydWN0b3IoY29sbCwgaWQsIG9wdGlvbnM9e30pIHtcbiAgICAgICAgdGhpcy5fdGVybWluaWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29sbCA9IGNvbGw7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAvLyBjYWxsYmFja1xuICAgICAgICB0aGlzLl9oYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLl9oYW5kbGUgPSB0aGlzLl9jb2xsLmFkZF9jYWxsYmFjayh0aGlzLl9vbmNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBfb25jaGFuZ2UoZGlmZnMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInZhcmlhYmxlIHRlcm1pbmF0ZWRcIilcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGRpZmYgb2YgZGlmZnMpIHtcbiAgICAgICAgICAgIGlmIChkaWZmLmlkID09IHRoaXMuX2lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faXRlbSA9IGRpZmYubmV3O1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcyhkaWZmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZF9jYWxsYmFjayAoaGFuZGxlcikge1xuICAgICAgICBjb25zdCBoYW5kbGUgPSB7aGFuZGxlcjogaGFuZGxlcn07XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLnB1c2goaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICB9O1xuICAgIFxuICAgIHJlbW92ZV9jYWxsYmFjayAoaGFuZGxlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuX2hhbmRsZXJzLmluZGV4T2YoaGFuZGxlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgbm90aWZ5X2NhbGxiYWNrcyAoZUFyZykge1xuICAgICAgICB0aGlzLl9oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgaGFuZGxlLmhhbmRsZXIoZUFyZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBcbiAgICBzZXQgKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YXJpYmxlIHRlcm1pbmF0ZWRcIilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IFt7aWQ6dGhpcy5faWQsIGRhdGE6dmFsdWV9XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGwudXBkYXRlKHtpbnNlcnQ6aXRlbXMsIHJlc2V0OmZhbHNlfSk7XG4gICAgfVxuXG4gICAgZ2V0ICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbGwuaGFzKHRoaXMuX2lkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGwuZ2V0KHRoaXMuX2lkKS5kYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnMudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgc3NfY2xpZW50X3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2NvbGwucmVtb3ZlX2NhbGxiYWNrKHRoaXMuX2hhbmRsZSk7XG4gICAgfVxufSIsIi8vIHdlYnBhZ2UgY2xvY2sgLSBwZXJmb3JtYW5jZSBub3cgLSBzZWNvbmRzXG5jb25zdCBsb2NhbCA9IHtcbiAgICBub3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkvMTAwMC4wO1xuICAgIH1cbn1cbi8vIHN5c3RlbSBjbG9jayAtIGVwb2NoIC0gc2Vjb25kc1xuY29uc3QgZXBvY2ggPSB7XG4gICAgbm93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkvMTAwMC4wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDTE9DSyBnaXZlcyBlcG9jaCB2YWx1ZXMsIGJ1dCBpcyBpbXBsZW1lbnRlZFxuICogdXNpbmcgcGVyZm9ybWFuY2Ugbm93IGZvciBiZXR0ZXJcbiAqIHRpbWUgcmVzb2x1dGlvbiBhbmQgcHJvdGVjdGlvbiBhZ2FpbnN0IHN5c3RlbSBcbiAqIHRpbWUgYWRqdXN0bWVudHMuXG4gKi9cblxuY29uc3QgQ0xPQ0sgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdDBfbG9jYWwgPSBsb2NhbC5ub3coKTtcbiAgICBjb25zdCB0MF9lcG9jaCA9IGVwb2NoLm5vdygpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgdDFfbG9jYWwgPSBsb2NhbC5ub3coKTtcbiAgICAgICAgICAgIHJldHVybiB0MF9lcG9jaCArICh0MV9sb2NhbCAtIHQwX2xvY2FsKTtcbiAgICAgICAgfVxuICAgIH07XG59KCk7XG5cblxuLyoqXG4gKiBFc3RpbWF0ZSB0aGUgY2xvY2sgb2YgdGhlIHNlcnZlciBcbiAqL1xuXG5jb25zdCBNQVhfU0FNUExFX0NPVU5UID0gMzA7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJDbG9jayB7XG5cbiAgICBjb25zdHJ1Y3Rvcihzc2NsaWVudCkge1xuICAgICAgICAvLyBzaGFyZXN0YXRlIGNsaWVudFxuICAgICAgICB0aGlzLl9zc2NsaWVudCA9IHNzY2xpZW50O1xuICAgICAgICAvLyBwaW5nZXJcbiAgICAgICAgdGhpcy5fcGluZ2VyID0gbmV3IFBpbmdlcih0aGlzLl9vbnBpbmcuYmluZCh0aGlzKSk7XG4gICAgICAgIC8vIHNhbXBsZXNcbiAgICAgICAgdGhpcy5fc2FtcGxlcyA9IFtdO1xuICAgICAgICAvLyBlc3RpbWF0ZXNcbiAgICAgICAgdGhpcy5fdHJhbnMgPSAxMDAwLjA7XG4gICAgICAgIHRoaXMuX3NrZXcgPSAwLjA7XG4gICAgfVxuXG4gICAgcmVzdW1lKCkge1xuICAgICAgICB0aGlzLl9waW5nZXIucmVzdW1lKCk7XG4gICAgfVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuX3Bpbmdlci5wYXVzZSgpO1xuICAgIH1cblxuICAgIF9vbnBpbmcoKSB7XG4gICAgICAgIGNvbnN0IHRzMCA9IENMT0NLLm5vdygpO1xuICAgICAgICB0aGlzLl9zc2NsaWVudC5nZXQoXCIvY2xvY2tcIikudGhlbigoe29rLCBkYXRhfSkgPT4ge1xuICAgICAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHMxID0gQ0xPQ0subm93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkX3NhbXBsZSh0czAsIGRhdGEsIHRzMSk7ICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfYWRkX3NhbXBsZShjcywgc3MsIGNyKSB7XG4gICAgICAgIGxldCB0cmFucyA9IChjciAtIGNzKSAvIDIuMDtcbiAgICAgICAgbGV0IHNrZXcgPSBzcyAtIChjciArIGNzKSAvIDIuMDtcbiAgICAgICAgbGV0IHNhbXBsZSA9IFtjcywgc3MsIGNyLCB0cmFucywgc2tld107XG4gICAgICAgIC8vIGFkZCB0byBzYW1wbGVzXG4gICAgICAgIHRoaXMuX3NhbXBsZXMucHVzaChzYW1wbGUpXG4gICAgICAgIGlmICh0aGlzLl9zYW1wbGVzLmxlbmd0aCA+IE1BWF9TQU1QTEVfQ09VTlQpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmaXJzdCBzYW1wbGVcbiAgICAgICAgICAgIHRoaXMuX3NhbXBsZXMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWV2YWx1YXRlIGVzdGltYXRlcyBmb3Igc2tldyBhbmQgdHJhbnNcbiAgICAgICAgdHJhbnMgPSAxMDAwMDAuMDtcbiAgICAgICAgc2tldyA9IDAuMDtcbiAgICAgICAgZm9yIChjb25zdCBzYW1wbGUgb2YgdGhpcy5fc2FtcGxlcykge1xuICAgICAgICAgICAgaWYgKHNhbXBsZVszXSA8IHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdHJhbnMgPSBzYW1wbGVbM107XG4gICAgICAgICAgICAgICAgc2tldyA9IHNhbXBsZVs0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9za2V3ID0gc2tldztcbiAgICAgICAgdGhpcy5fdHJhbnMgPSB0cmFucztcbiAgICB9XG5cbiAgICBnZXQgc2tldygpIHtyZXR1cm4gdGhpcy5fc2tldzt9XG4gICAgZ2V0IHRyYW5zKCkge3JldHVybiB0aGlzLl90cmFuczt9XG5cbiAgICBub3coKSB7XG4gICAgICAgIC8vIHNlcnZlciBjbG9jayBpcyBsb2NhbCBjbG9jayArIGVzdGltYXRlZCBza2V3XG4gICAgICAgIHJldHVybiBDTE9DSy5ub3coKSArIHRoaXMuX3NrZXc7XG4gICAgfVxuXG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIFBJTkdFUlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBQaW5nZXIgaW52b2tlcyBhIGNhbGxiYWNrIHJlcGVhdGVkbHksIGluZGVmaW5pdGVseS4gXG4gKiBQaW5naW5nIGluIDMgc3RhZ2VzLCBmaXJzdCBmcmVxdWVudGx5LCB0aGVuIG1vZGVyYXRlbHksIFxuICogdGhlbiBzbG93bHkuXG4gKi9cblxuY29uc3QgU01BTExfREVMQVkgPSAyMDsgLy8gbXNcbmNvbnN0IE1FRElVTV9ERUxBWSA9IDUwMDsgLy8gbXNcbmNvbnN0IExBUkdFX0RFTEFZID0gMTAwMDA7IC8vIG1zXG5cbmNvbnN0IERFTEFZX1NFUVVFTkNFID0gW1xuICAgIC4uLm5ldyBBcnJheSgzKS5maWxsKFNNQUxMX0RFTEFZKSwgXG4gICAgLi4ubmV3IEFycmF5KDcpLmZpbGwoTUVESVVNX0RFTEFZKSxcbiAgICAuLi5bTEFSR0VfREVMQVldXG5dO1xuXG5jbGFzcyBQaW5nZXIge1xuXG4gICAgY29uc3RydWN0b3IgKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5fdGlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9waW5nID0gdGhpcy5waW5nLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2RlbGF5cyA9IFsuLi5ERUxBWV9TRVFVRU5DRV07XG4gICAgfVxuICAgIHBhdXNlKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGlkKTtcbiAgICB9XG4gICAgcmVzdW1lKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGlkKTtcbiAgICAgICAgdGhpcy5waW5nKCk7XG4gICAgfVxuICAgIHJlc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX2RlbGF5cyA9IFsuLi5ERUxBWV9TRVFVRU5DRV07XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aWQpO1xuICAgICAgICB0aGlzLnBpbmcoKTtcbiAgICB9XG4gICAgcGluZyAoKSB7XG4gICAgICAgIGxldCBuZXh0X2RlbGF5ID0gdGhpcy5fZGVsYXlzWzBdO1xuICAgICAgICBpZiAodGhpcy5fZGVsYXlzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlbGF5cy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90aWQgPSBzZXRUaW1lb3V0KHRoaXMuX3BpbmcsIG5leHRfZGVsYXkpO1xuICAgIH1cbn1cblxuXG4iLCJpbXBvcnQgeyBXZWJTb2NrZXRJTyB9IGZyb20gXCIuL3dzaW8uanNcIjtcbmltcG9ydCB7IHJlc29sdmFibGVQcm9taXNlIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gXCIuL2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IFZhcmlhYmxlIH0gZnJvbSBcIi4vdmFyaWFibGUuanNcIjtcbmltcG9ydCB7IFNlcnZlckNsb2NrIH0gZnJvbSBcIi4vc2VydmVyY2xvY2suanNcIjtcblxuY29uc3QgTXNnVHlwZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIE1FU1NBR0UgOiBcIk1FU1NBR0VcIixcbiAgICBSRVFVRVNUOiBcIlJFUVVFU1RcIixcbiAgICBSRVBMWTogXCJSRVBMWVwiXG4gfSk7XG4gXG5jb25zdCBNc2dDbWQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBHRVQgOiBcIkdFVFwiLFxuICAgIFBVVDogXCJQVVRcIixcbiAgICBOT1RJRlk6IFwiTk9USUZZXCJcbn0pO1xuXG5cbmV4cG9ydCBjbGFzcyBTaGFyZWRTdGF0ZUNsaWVudCBleHRlbmRzIFdlYlNvY2tldElPIHtcblxuICAgIGNvbnN0cnVjdG9yICh1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIodXJsLCBvcHRpb25zKTtcblxuICAgICAgICAvLyByZXF1ZXN0c1xuICAgICAgICB0aGlzLl9yZXFpZCA9IDA7XG4gICAgICAgIHRoaXMuX3BlbmRpbmcgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgLy8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAvLyBwYXRoIC0+IHt9IFxuICAgICAgICB0aGlzLl9zdWJzX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBjb2xsZWN0aW9ucyB7cGF0aCAtPiBjb2xsZWN0aW9ufVxuICAgICAgICB0aGlzLl9jb2xsX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyB2YXJpYWJsZXMge1twYXRoLCBpZF0gLT4gdmFyaWFibGV9XG4gICAgICAgIHRoaXMuX3Zhcl9tYXAgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgLy8gc2VydmVyIGNsb2NrXG4gICAgICAgIHRoaXMuX3NlcnZlcl9jbG9jaztcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIENPTk5FQ1RJT04gXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgb25fY29ubmVjdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coYENvbm5lY3QgICR7dGhpcy51cmx9YCk7XG4gICAgICAgIC8vIHJlZnJlc2ggbG9jYWwgc3VzY3JpcHRpb25zXG4gICAgICAgIGlmICh0aGlzLl9zdWJzX21hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4udGhpcy5fc3Vic19tYXAuZW50cmllcygpXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKFwiL3N1YnNcIiwge2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlcnZlciBjbG9ja1xuICAgICAgICBpZiAodGhpcy5fc2VydmVyX2Nsb2NrICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fc2VydmVyX2Nsb2NrLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uX2Rpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYERpc2Nvbm5lY3QgJHt0aGlzLnVybH1gKTtcbiAgICAgICAgLy8gc2VydmVyIGNsb2NrXG4gICAgICAgIGlmICh0aGlzLl9zZXJ2ZXJfY2xvY2sgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXJ2ZXJfY2xvY2sucGF1c2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbl9lcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCB7ZGVidWc9ZmFsc2V9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgaWYgKGRlYnVnKSB7Y29uc29sZS5sb2coYENvbW11bmljYXRpb24gRXJyb3I6ICR7ZXJyb3J9YCk7fVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgSEFORExFUlNcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICBvbl9tZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgbGV0IG1zZyA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIGlmIChtc2cudHlwZSA9PSBNc2dUeXBlLlJFUExZKSB7XG4gICAgICAgICAgICBsZXQgcmVxaWQgPSBtc2cudHVubmVsO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmcuaGFzKHJlcWlkKSkge1xuICAgICAgICAgICAgICAgIGxldCByZXNvbHZlciA9IHRoaXMuX3BlbmRpbmcuZ2V0KHJlcWlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nLmRlbGV0ZShyZXFpZCk7XG4gICAgICAgICAgICAgICAgY29uc3Qge29rLCBkYXRhfSA9IG1zZztcbiAgICAgICAgICAgICAgICByZXNvbHZlcih7b2ssIGRhdGF9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PSBNc2dUeXBlLk1FU1NBR0UpIHtcbiAgICAgICAgICAgIGlmIChtc2cuY21kID09IE1zZ0NtZC5OT1RJRlkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVfbm90aWZ5KG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlX25vdGlmeShtc2cpIHtcbiAgICAgICAgLy8gdXBkYXRlIGNvbGxlY3Rpb24gc3RhdGVcbiAgICAgICAgY29uc3QgZHMgPSB0aGlzLl9jb2xsX21hcC5nZXQobXNnW1wicGF0aFwiXSk7XG4gICAgICAgIGlmIChkcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzLl9zc2NsaWVudF91cGRhdGUobXNnW1wiZGF0YVwiXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIFNFUlZFUiBSRVFVRVNUU1xuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIF9yZXF1ZXN0KGNtZCwgcGF0aCwgYXJnKSB7XG4gICAgICAgIGNvbnN0IHJlcWlkID0gdGhpcy5fcmVxaWQrKztcbiAgICAgICAgY29uc3QgbXNnID0ge1xuICAgICAgICAgICAgdHlwZTogTXNnVHlwZS5SRVFVRVNULFxuICAgICAgICAgICAgY21kLCBcbiAgICAgICAgICAgIHBhdGgsIFxuICAgICAgICAgICAgYXJnLFxuICAgICAgICAgICAgdHVubmVsOiByZXFpZFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7XG4gICAgICAgIGxldCBbcHJvbWlzZSwgcmVzb2x2ZXJdID0gcmVzb2x2YWJsZVByb21pc2UoKTtcbiAgICAgICAgdGhpcy5fcGVuZGluZy5zZXQocmVxaWQsIHJlc29sdmVyKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbigoe29rLCBkYXRhfSkgPT4ge1xuICAgICAgICAgICAgLy8gc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVwbGllcyB0byBQVVQgL3N1YnNcbiAgICAgICAgICAgIGlmIChjbWQgPT0gTXNnQ21kLlBVVCAmJiBwYXRoID09IFwiL3N1YnNcIiAmJiBvaykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBzdWJzY3JpcHRpb24gc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzLl9zdWJzX21hcCA9IG5ldyBNYXAoZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7b2ssIHBhdGgsIGRhdGF9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfc3ViIChwYXRoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgLy8gY29weSBjdXJyZW50IHN0YXRlIG9mIHN1YnNcbiAgICAgICAgICAgIGNvbnN0IHN1YnNfbWFwID0gbmV3IE1hcChbLi4udGhpcy5fc3Vic19tYXBdKTtcbiAgICAgICAgICAgIC8vIHNldCBuZXcgcGF0aFxuICAgICAgICAgICAgc3Vic19tYXAuc2V0KHBhdGgsIHt9KTtcbiAgICAgICAgICAgIC8vIHJlc2V0IHN1YnMgb24gc2VydmVyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IFsuLi50aGlzLl9zdWJzX21hcC5lbnRyaWVzKCldO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKFwiL3N1YnNcIiwge2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2FsIHN1YnMgLSBzdWJzY3JpYmUgb24gcmVjb25uZWN0XG4gICAgICAgICAgICB0aGlzLl9zdWJzX21hcC5zZXQocGF0aCwge30pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7b2s6IHRydWUsIHBhdGgsIGRhdGE6dW5kZWZpbmVkfSlcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgX3Vuc3ViIChwYXRoKSB7XG4gICAgICAgIC8vIGNvcHkgY3VycmVudCBzdGF0ZSBvZiBzdWJzXG4gICAgICAgIGNvbnN0IHN1YnNfbWFwID0gbmV3IE1hcChbLi4udGhpcy5fc3Vic19tYXBdKTtcbiAgICAgICAgLy8gcmVtb3ZlIHBhdGhcbiAgICAgICAgc3Vic19tYXAuZGVsZXRlKHBhdGgpXG4gICAgICAgIC8vIHJlc2V0IHN1YnMgb24gc2VydmVyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLnN1YnNfbWFwLmVudHJpZXMoKV07XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZShcIi9zdWJzXCIsIHtpbnNlcnQ6aXRlbXMsIHJlc2V0OnRydWV9KTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIEFQSVxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8vIGFjY3Nlc3NvciBmb3Igc2VydmVyIGNsb2NrXG4gICAgZ2V0IGNsb2NrKCkge1xuICAgICAgICBpZiAodGhpcy5fc2VydmVyX2Nsb2NrID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fc2VydmVyX2Nsb2NrID0gbmV3IFNlcnZlckNsb2NrKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VydmVyX2Nsb2NrLnJlc3VtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJfY2xvY2s7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHJlcXVlc3QgZm9yIGl0ZW1zIGJ5IHBhdGhcbiAgICBnZXQocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChNc2dDbWQuR0VULCBwYXRoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gdXBkYXRlIHJlcXVlc3QgZm9yIHBhdGhcbiAgICB1cGRhdGUocGF0aCwgY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChNc2dDbWQuUFVULCBwYXRoLCBjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlIGNvbGxlY3Rpb24gZm9yIHBhdGhcbiAgICAgKiAtIGF1dG9tYXRpY2FsbHkgc3Vic2NyaWJlcyB0byBwYXRoIGlmIG5lZWRlZFxuICAgICAqL1xuICAgIGFjcXVpcmVfY29sbGVjdGlvbiAocGF0aCwgb3B0aW9ucykge1xuICAgICAgICAvLyBzdWJzY3JpYmUgaWYgc3Vic2NyaXB0aW9uIGRvZXMgbm90IGV4aXN0c1xuICAgICAgICBpZiAoIXRoaXMuX3N1YnNfbWFwLmhhcyhwYXRoKSkge1xuICAgICAgICAgICAgLy8gc3Vic2NyaWJlIHRvIHBhdGhcbiAgICAgICAgICAgIHRoaXMuX3N1YihwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmVhdGUgY29sbGVjdGlvbiBpZiBub3QgZXhpc3RzXG4gICAgICAgIGlmICghdGhpcy5fY29sbF9tYXAuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICB0aGlzLl9jb2xsX21hcC5zZXQocGF0aCwgbmV3IENvbGxlY3Rpb24odGhpcywgcGF0aCwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xsX21hcC5nZXQocGF0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZSB2YXJpYWJsZSBmb3IgKHBhdGgsIG5hbWUpXG4gICAgICogLSBhdXRvbWF0aWNhbGx5IGFjcXVpcmUgY29sbGVjdGlvblxuICAgICAqL1xuICAgIGFjcXVpcmVfdmFyaWFibGUgKHBhdGgsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZHMgPSB0aGlzLmFjcXVpcmVfY29sbGVjdGlvbihwYXRoKTtcbiAgICAgICAgLy8gY3JlYXRlIHZhcmlhYmxlIGlmIG5vdCBleGlzdHNcbiAgICAgICAgaWYgKCF0aGlzLl92YXJfbWFwLmhhcyhwYXRoKSkge1xuICAgICAgICAgICAgdGhpcy5fdmFyX21hcC5zZXQocGF0aCwgbmV3IE1hcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YXJfbWFwID0gdGhpcy5fdmFyX21hcC5nZXQocGF0aCk7XG4gICAgICAgIGlmICghdmFyX21hcC5nZXQobmFtZSkpIHtcbiAgICAgICAgICAgIHZhcl9tYXAuc2V0KG5hbWUsIG5ldyBWYXJpYWJsZShkcywgbmFtZSwgb3B0aW9ucykpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhcl9tYXAuZ2V0KG5hbWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVsZWFzZSBwYXRoLCBpbmNsdWRpbmcgY29sbGVjdGlvbiBhbmQgdmFyaWFibGVzXG4gICAgICovXG4gICAgcmVsZWFzZShwYXRoKSB7XG4gICAgICAgIC8vIHVuc3Vic2NyaWJlXG4gICAgICAgIGlmICh0aGlzLl9zdWJzX21hcC5oYXMocGF0aCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3ViKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRlcm1pbmF0ZSBjb2xsZWN0aW9uIGFuZCB2YXJpYWJsZXNcbiAgICAgICAgY29uc3QgZHMgPSB0aGlzLl9jb2xsX21hcC5nZXQocGF0aCk7XG4gICAgICAgIGRzLl9zc2NsaWVudF90ZXJtaW5hdGUoKTtcbiAgICAgICAgY29uc3QgdmFyX21hcCA9IHRoaXMuX3Zhcl9tYXAuZ2V0KHBhdGgpO1xuICAgICAgICBpZiAodmFyX21hcCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB2YXJfbWFwLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgdi5fc3NjbGllbnRfdGVybWluYXRlKCk7XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbGxfbWFwLmRlbGV0ZShwYXRoKTtcbiAgICAgICAgdGhpcy5fdmFyX21hcC5kZWxldGUocGF0aCk7XG4gICAgfVxufVxuXG5cbiIsIi8qXG4gICAgQ29sbGVjdGlvbiBWaWV3ZXJcbiovXG5cbmZ1bmN0aW9uIGl0ZW0yc3RyaW5nKGl0ZW0pIHtcbiAgICBjb25zdCB7aWQsIGl0diwgZGF0YX0gPSBpdGVtO1xuICAgIGxldCBkYXRhX3R4dCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIGxldCBpdHZfdHh0ID0gKGl0diAhPSB1bmRlZmluZWQpID8gSlNPTi5zdHJpbmdpZnkoaXR2KSA6IFwiXCI7XG4gICAgbGV0IGlkX2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJpZFwiPiR7aWR9PC9zcGFuPmA7XG4gICAgbGV0IGl0dl9odG1sID0gYDxzcGFuIGNsYXNzPVwiaXR2XCI+JHtpdHZfdHh0fTwvc3Bhbj5gO1xuICAgIGxldCBkYXRhX2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJkYXRhXCI+JHtkYXRhX3R4dH08L3NwYW4+YDtcbiAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImRlbGV0ZVwiPlg8L2J1dHRvbj5cbiAgICAgICAgICAgICR7aWRfaHRtbH06ICR7aXR2X2h0bWx9ICR7ZGF0YV9odG1sfVxuICAgICAgICA8L2Rpdj5gO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBDb2xsZWN0aW9uVmlld2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGVsZW0sIG9wdGlvbnM9e30pIHtcbiAgICAgICAgdGhpcy5fY29sbCA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuX2VsZW0gPSBlbGVtO1xuICAgICAgICB0aGlzLl9oYW5kbGUgPSB0aGlzLl9jb2xsLmFkZF9jYWxsYmFjayh0aGlzLl9vbmNoYW5nZS5iaW5kKHRoaXMpKTsgXG5cbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBsZXQgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBkZWxldGU6ZmFsc2UsXG4gICAgICAgICAgICB0b1N0cmluZzppdGVtMnN0cmluZ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gey4uLmRlZmF1bHRzLCAuLi5vcHRpb25zfTtcblxuICAgICAgICAvKlxuICAgICAgICAgICAgU3VwcG9ydCBkZWxldGVcbiAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuZGVsZXRlKSB7XG4gICAgICAgICAgICAvLyBsaXN0ZW4gZm9yIGNsaWNrIGV2ZW50cyBvbiByb290IGVsZW1lbnRcbiAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY2F0Y2ggY2xpY2sgZXZlbnQgZnJvbSBkZWxldGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQuY2xvc2VzdChcIiNkZWxldGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRlbGV0ZUJ0bi5jbG9zZXN0KFwiLmxpc3QtaXRlbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsLnVwZGF0ZSh7cmVtb3ZlOltsaXN0SXRlbS5pZF19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAgICByZW5kZXIgaW5pdGlhbCBzdGF0ZVxuICAgICAgICAqLyBcbiAgICAgICAgY29uc3QgZGlmZnMgPSB0aGlzLl9jb2xsLmdldCgpXG4gICAgICAgICAgICAubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7aWQ6aXRlbS5pZCwgbmV3Oml0ZW19XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fb25jaGFuZ2UoZGlmZnMpO1xuICAgIH1cblxuICAgIF9vbmNoYW5nZShkaWZmcykge1xuICAgICAgICBjb25zdCB7dG9TdHJpbmd9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgZm9yIChsZXQgZGlmZiBvZiBkaWZmcykge1xuICAgICAgICAgICAgaWYgKGRpZmYubmV3KSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkXG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IoYCMke2RpZmYuaWR9YCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkaWZmLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IHRvU3RyaW5nKGRpZmYubmV3KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi5vbGQpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmVcbiAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuX2VsZW0ucXVlcnlTZWxlY3RvcihgIyR7ZGlmZi5pZH1gKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInJlc29sdmFibGVQcm9taXNlIiwicmVzb2x2ZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIk1BWF9SRVRSSUVTIiwiV2ViU29ja2V0SU8iLCJjb25zdHJ1Y3RvciIsInVybCIsIm9wdGlvbnMiLCJ0aGlzIiwiX3VybCIsIl93cyIsIl9jb25uZWN0aW5nIiwiX2Nvbm5lY3RlZCIsIl9vcHRpb25zIiwiX3JldHJpZXMiLCJfY29ubmVjdF9wcm9taXNlX3Jlc29sdmVycyIsImNvbm5lY3RpbmciLCJjb25uZWN0ZWQiLCJjb25uZWN0IiwiY29uc29sZSIsImxvZyIsIl9pc190ZXJtaW5hdGVkIiwiV2ViU29ja2V0Iiwib25vcGVuIiwiZSIsIl9vbl9vcGVuIiwib25tZXNzYWdlIiwib25fbWVzc2FnZSIsImRhdGEiLCJvbmNsb3NlIiwiX29uX2Nsb3NlIiwib25lcnJvciIsIm9uX2Vycm9yIiwib25fY29ubmVjdGluZyIsImV2ZW50Iiwib25fY29ubmVjdCIsIm9uX2Rpc2Nvbm5lY3QiLCJzZXRUaW1lb3V0IiwicmV0cmllcyIsInVuZGVmaW5lZCIsImRlYnVnIiwiZXJyb3IiLCJzZW5kIiwiY29ubmVjdGVkUHJvbWlzZSIsInByb21pc2UiLCJwdXNoIiwiQ29sbGVjdGlvbiIsInNzY2xpZW50IiwicGF0aCIsIl90ZXJtaW5hdGVkIiwiX3NzY2xpZW50IiwiX3BhdGgiLCJfaGFuZGxlcnMiLCJfbWFwIiwiTWFwIiwiX3NzY2xpZW50X3Rlcm1pbmF0ZSIsIl9zc2NsaWVudF91cGRhdGUiLCJjaGFuZ2VzIiwiRXJyb3IiLCJyZW1vdmUiLCJpbnNlcnQiLCJyZXNldCIsImRpZmZfbWFwIiwiaXRlbSIsInZhbHVlcyIsInNldCIsImlkIiwibmV3Iiwib2xkIiwiX2lkIiwiZ2V0IiwiZGVsZXRlIiwiZGlmZiIsIl9ub3RpZnlfY2FsbGJhY2tzIiwiZUFyZyIsImZvckVhY2giLCJoYW5kbGUiLCJoYW5kbGVyIiwic2l6ZSIsImhhcyIsInVwZGF0ZSIsIm1hcCIsImxlbmd0aCIsInRleHQiLCJwb3NzaWJsZSIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21fc3RyaW5nIiwiYWRkX2NhbGxiYWNrIiwicmVtb3ZlX2NhbGxiYWNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiVmFyaWFibGUiLCJjb2xsIiwiX3Rlcm1pbmlhdGVkIiwiX2NvbGwiLCJfaGFuZGxlIiwiX29uY2hhbmdlIiwiYmluZCIsImRpZmZzIiwiX2l0ZW0iLCJub3RpZnlfY2FsbGJhY2tzIiwiX2hhbmRlcnMiLCJ2YWx1ZSIsIml0ZW1zIiwic3NfY2xpZW50X3Rlcm1pbmF0ZSIsImxvY2FsIiwicGVyZm9ybWFuY2UiLCJub3ciLCJlcG9jaCIsIkRhdGUiLCJDTE9DSyIsInQwX2xvY2FsIiwidDBfZXBvY2giLCJ0MV9sb2NhbCIsIlNlcnZlckNsb2NrIiwiX3BpbmdlciIsIlBpbmdlciIsIl9vbnBpbmciLCJfc2FtcGxlcyIsIl90cmFucyIsIl9za2V3IiwicmVzdW1lIiwicGF1c2UiLCJ0czAiLCJ0aGVuIiwib2siLCJ0czEiLCJfYWRkX3NhbXBsZSIsImNzIiwic3MiLCJjciIsInRyYW5zIiwic2tldyIsInNhbXBsZSIsInNoaWZ0IiwiREVMQVlfU0VRVUVOQ0UiLCJBcnJheSIsImZpbGwiLCJjYWxsYmFjayIsIl9jb3VudCIsIl90aWQiLCJfY2FsbGJhY2siLCJfcGluZyIsInBpbmciLCJfZGVsYXlzIiwiY2xlYXJUaW1lb3V0IiwicmVzdGFydCIsIm5leHRfZGVsYXkiLCJNc2dUeXBlIiwiT2JqZWN0IiwiZnJlZXplIiwiTUVTU0FHRSIsIlJFUVVFU1QiLCJSRVBMWSIsIk1zZ0NtZCIsIkdFVCIsIlBVVCIsIk5PVElGWSIsIml0ZW0yc3RyaW5nIiwiaXR2IiwiZGF0YV90eHQiLCJKU09OIiwic3RyaW5naWZ5IiwiY29sbGVjdGlvbiIsImVsZW0iLCJfZWxlbSIsImRlZmF1bHRzIiwidG9TdHJpbmciLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlQnRuIiwidGFyZ2V0IiwiY2xvc2VzdCIsImxpc3RJdGVtIiwic3RvcFByb3BhZ2F0aW9uIiwibm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInN1cGVyIiwiX3JlcWlkIiwiX3BlbmRpbmciLCJfc3Vic19tYXAiLCJfY29sbF9tYXAiLCJfdmFyX21hcCIsIl9zZXJ2ZXJfY2xvY2siLCJlbnRyaWVzIiwibXNnIiwicGFyc2UiLCJ0eXBlIiwicmVxaWQiLCJ0dW5uZWwiLCJjbWQiLCJfaGFuZGxlX25vdGlmeSIsImRzIiwiX3JlcXVlc3QiLCJhcmciLCJfc3ViIiwiX3Vuc3ViIiwic3Vic19tYXAiLCJjbG9jayIsImFjcXVpcmVfY29sbGVjdGlvbiIsImFjcXVpcmVfdmFyaWFibGUiLCJuYW1lIiwidmFyX21hcCIsInJlbGVhc2UiLCJ2Il0sIm1hcHBpbmdzIjoieUNBTU8sU0FBU0EsSUFDWixJQUFJQyxFQUlKLE1BQU8sQ0FITyxJQUFJQyxTQUFRLENBQUNDLEVBQVNDLEtBQ2hDSCxFQUFXRSxDQUFPLElBRUxGLEVBQ3JCLENDVkEsTUFBTUksRUFBYyxFQUViLE1BQU1DLEVBRVQsV0FBQUMsQ0FBWUMsRUFBS0MsRUFBUSxJQUNyQkMsS0FBS0MsS0FBT0gsRUFDWkUsS0FBS0UsSUFDTEYsS0FBS0csYUFBYyxFQUNuQkgsS0FBS0ksWUFBYSxFQUNsQkosS0FBS0ssU0FBV04sRUFDaEJDLEtBQUtNLFNBQVcsRUFDaEJOLEtBQUtPLDJCQUE2QixFQUMxQyxDQUVJLGNBQUlDLEdBQWMsT0FBT1IsS0FBS0csV0FBWSxDQUMxQyxhQUFJTSxHQUFhLE9BQU9ULEtBQUtJLFVBQVcsQ0FDeEMsT0FBSU4sR0FBTyxPQUFPRSxLQUFLQyxJQUFLLENBQzVCLFdBQUlGLEdBQVcsT0FBT0MsS0FBS0ssUUFBUyxDQUVwQyxPQUFBSyxHQUVRVixLQUFLUSxZQUFjUixLQUFLUyxVQUN4QkUsUUFBUUMsSUFBSSx5Q0FHWlosS0FBS2EsaUJBQ0xGLFFBQVFDLElBQUksZUFLaEJaLEtBQUtFLElBQU0sSUFBSVksVUFBVWQsS0FBS0MsTUFDOUJELEtBQUtHLGFBQWMsRUFDbkJILEtBQUtFLElBQUlhLE9BQVNDLEdBQUtoQixLQUFLaUIsU0FBU0QsR0FDckNoQixLQUFLRSxJQUFJZ0IsVUFBWUYsR0FBS2hCLEtBQUttQixXQUFXSCxFQUFFSSxNQUM1Q3BCLEtBQUtFLElBQUltQixR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
